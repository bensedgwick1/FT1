<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fine Tuned City-Level Unemployment Estimates | Unemployment Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation -->
    <nav class="bg-blue-600 text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold flex items-center">
                <i data-feather="grid" class="mr-2"></i>
                <span>City Data Tracker</span>
            </a>
            <div class="flex space-x-4">
                 <a href="index.html" class="px-4 py-2 rounded-lg bg-white text-blue-600 font-medium hover:bg-blue-50 transition duration-200">
                    <i data-feather="home" class="inline mr-1"></i> Home
                </a>
                <a href="state-data.html" class="px-4 py-2 rounded-lg bg-white text-blue-600 font-medium hover:bg-blue-50 transition duration-200">
                    <i data-feather="map" class="inline mr-1"></i> State Data
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Header Section -->
        <section class="mb-12 text-center">
            <h1 class="text-4xl font-bold text-gray-800 mb-4">Fine Tuned City-Level Unemployment Estimates by Field</h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                An estimated breakdown of unemployed graduates for major cities within all 50 U.S. states.
            </p>
        </section>

        <!-- Methodology & Disclaimer -->
        <section class="mb-12 bg-red-50 rounded-xl p-6 border-l-4 border-red-600">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <i data-feather="alert-triangle" class="w-7 h-7 text-red-600 mr-3"></i>EXTREMELY IMPORTANT: READ BEFORE PROCEEDING
            </h2>
            <p class="text-gray-700 font-bold mb-2">
                The data on this page is a multi-layered statistical estimate. Official government data for unemployment by college major at the city level DOES NOT EXIST.
            </p>
            <p class="text-gray-700">
                These figures are generated by a model. For most states, the model applies national averages. 
                <strong class="text-blue-700">A fine-tuned model has been applied to WA, CA, CO, TX, FL, OR, and NY, using local demographic and economic data to provide a more precise estimate.</strong>
            </p>
        </section>

        <!-- Data Section -->
        <div id="data-container" class="space-y-12">
            <!-- Data for all 50 states will be dynamically inserted here -->
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4 text-center text-gray-400">
            <p>Â© 2025 Unemployment Trends Tracker. All figures are estimates based on a statistical model.</p>
        </div>
    </footer>

    <script>
        feather.replace();

        // --- MODEL CONSTANTS ---
        const MODELS = {
            "National": {
                GRAD_RATIO: 0.245,
                FIELD_RATIOS: { ARTS: 0.22, IT: 0.18, BUSINESS: 0.15, SOCSCI: 0.16 }
            },
            "Washington": {
                GRAD_RATIO: 0.265,
                FIELD_RATIOS: { ARTS: 0.19, IT: 0.24, BUSINESS: 0.14, SOCSCI: 0.15 },
                WORKING_AGE_RATIO: 0.598
            },
            "California": {
                GRAD_RATIO: 0.270,
                FIELD_RATIOS: { ARTS: 0.23, IT: 0.25, BUSINESS: 0.13, SOCSCI: 0.14 },
                WORKING_AGE_RATIO: 0.605
            },
            "Colorado": {
                GRAD_RATIO: 0.280,
                FIELD_RATIOS: { ARTS: 0.20, IT: 0.23, BUSINESS: 0.15, SOCSCI: 0.16 },
                WORKING_AGE_RATIO: 0.610
            },
            "Texas": {
                GRAD_RATIO: 0.250,
                FIELD_RATIOS: { ARTS: 0.20, IT: 0.20, BUSINESS: 0.18, SOCSCI: 0.15 },
                WORKING_AGE_RATIO: 0.600
            },
            "Florida": {
                GRAD_RATIO: 0.245,
                FIELD_RATIOS: { ARTS: 0.24, IT: 0.15, BUSINESS: 0.17, SOCSCI: 0.16 },
                WORKING_AGE_RATIO: 0.580
            },
            "Oregon": {
                GRAD_RATIO: 0.260,
                FIELD_RATIOS: { ARTS: 0.21, IT: 0.21, BUSINESS: 0.15, SOCSCI: 0.16 },
                WORKING_AGE_RATIO: 0.595
            },
            "New York": {
                GRAD_RATIO: 0.275,
                FIELD_RATIOS: { ARTS: 0.21, IT: 0.16, BUSINESS: 0.22, SOCSCI: 0.15 },
                WORKING_AGE_RATIO: 0.602
            }
        };

        // --- SUMMARY DATA (for fine-tuned states) ---
        const summaryData = {
            "Washington": { statePopulation: 7951000, cities: [{ name: 'Seattle', population: 755078, income: 116000 }, { name: 'Spokane', population: 230153, income: 67000 }, { name: 'Tacoma', population: 222883, income: 80000 }, { name: 'Vancouver', population: 197479, income: 78000 }, { name: 'Bellevue', population: 154569, income: 156000 }], stateMedianIncome: 90000 },
            "California": { statePopulation: 38965000, cities: [{ name: 'Los Angeles', population: 3822238, income: 76000 }, { name: 'San Diego', population: 1381162, income: 98000 }, { name: 'San Jose', population: 971233, income: 140000 }, { name: 'San Francisco', population: 815201, income: 136000 }, { name: 'Fresno', population: 545567, income: 63000 }], stateMedianIncome: 91000 },
            "Colorado": { statePopulation: 5877000, cities: [{ name: 'Denver', population: 711463, income: 85000 }, { name: 'Colorado Springs', population: 486253, income: 78000 }, { name: 'Aurora', population: 391133, income: 79000 }, { name: 'Fort Collins', population: 168538, income: 82000 }, { name: 'Lakewood', population: 156469, income: 84000 }], stateMedianIncome: 87000 },
            "Texas": { statePopulation: 30503000, cities: [{ name: 'Houston', population: 2302878, income: 61000 }, { name: 'San Antonio', population: 1472909, income: 60000 }, { name: 'Dallas', population: 1299544, income: 64000 }, { name: 'Austin', population: 974343, income: 89000 }, { name: 'Fort Worth', population: 956709, income: 72000 }], stateMedianIncome: 73000 },
            "Florida": { statePopulation: 22610000, cities: [{ name: 'Jacksonville', population: 971319, income: 65000 }, { name: 'Miami', population: 449514, income: 54000 }, { name: 'Tampa', population: 392891, income: 67000 }, { name: 'Orlando', population: 316081, income: 64000 }, { name: 'St. Petersburg', population: 261256, income: 71000 }], stateMedianIncome: 67000 },
            "Oregon": { statePopulation: 4359000, cities: [{ name: 'Portland', population: 641152, income: 85000 }, { name: 'Salem', population: 180013, income: 70000 }, { name: 'Eugene', population: 177921, income: 63000 }, { name: 'Gresham', population: 112613, income: 69000 }, { name: 'Hillsboro', population: 107317, income: 105000 }], stateMedianIncome: 76000 },
            "New York": { statePopulation: 19571000, cities: [{ name: 'New York City', population: 8335897, income: 76000 }, { name: 'Buffalo', population: 276807, income: 45000 }, { name: 'Rochester', population: 210636, income: 42000 }, { name: 'Yonkers', population: 209527, income: 77000 }, { name: 'Syracuse', population: 146103, income: 44000 }], stateMedianIncome: 75000 }
        };
        
        // --- UNEMPLOYMENT DATA (Unchanged) ---
        const cityData = {
            // ... (Full 50-state unemployment data from previous step)
             "Alabama": { stateTotal: 50150, cities: [{ name: 'Huntsville', total: 5200 }, { name: 'Birmingham', total: 6000 }, { name: 'Montgomery', total: 3900 }, { name: 'Mobile', total: 4100 }, { name: 'Tuscaloosa', total: 2500 }] },
            "Alaska": { stateTotal: 15400, cities: [{ name: 'Anchorage', total: 8500 }, { name: 'Fairbanks', total: 1500 }, { name: 'Juneau', total: 1000 }, { name: 'Wasilla', total: 400 }, { name: 'Sitka', total: 200 }] },
            "Arizona": { stateTotal: 125500, cities: [{ name: 'Phoenix', total: 40000 }, { name: 'Tucson', total: 15000 }, { name: 'Mesa', total: 12000 }, { name: 'Chandler', total: 6000 }, { name: 'Scottsdale', total: 5000 }] },
            "Arkansas": { stateTotal: 35200, cities: [{ name: 'Little Rock', total: 8000 }, { name: 'Fayetteville', total: 3000 }, { name: 'Fort Smith', total: 3500 }, { name: 'Springdale', total: 2500 }, { name: 'Jonesboro', total: 2000 }] },
            "California": { stateTotal: 975300, cities: [{ name: 'Los Angeles', total: 205000 }, { name: 'San Diego', total: 60000 }, { name: 'San Jose', total: 35000 }, { name: 'San Francisco', total: 31000 }, { name: 'Fresno', total: 24000 }] },
            "Colorado": { stateTotal: 92800, cities: [{ name: 'Denver', total: 25000 }, { name: 'Colorado Springs', total: 15000 }, { name: 'Aurora', total: 10000 }, { name: 'Fort Collins', total: 6000 }, { name: 'Lakewood', total: 4000 }] },
            "Connecticut": { stateTotal: 65100, cities: [{ name: 'Bridgeport', total: 8000 }, { name: 'New Haven', total: 7000 }, { name: 'Stamford', total: 6500 }, { name: 'Hartford', total: 6000 }, { name: 'Waterbury', total: 5000 }] },
            "Delaware": { stateTotal: 20900, cities: [{ name: 'Wilmington', total: 8000 }, { name: 'Dover', total: 4000 }, { name: 'Newark', total: 3000 }, { name: 'Middletown', total: 1000 }, { name: 'Smyrna', total: 500 }] },
            "Florida": { stateTotal: 301000, cities: [{ name: 'Jacksonville', total: 35000 }, { name: 'Miami', total: 40000 }, { name: 'Tampa', total: 30000 }, { name: 'Orlando', total: 25000 }, { name: 'St. Petersburg', total: 15000 }] },
            "Georgia": { stateTotal: 158700, cities: [{ name: 'Atlanta', total: 45000 }, { name: 'Augusta', total: 15000 }, { name: 'Columbus', total: 12000 }, { name: 'Macon', total: 10000 }, { name: 'Savannah', total: 11000 }] },
            "Hawaii": { stateTotal: 18400, cities: [{ name: 'Honolulu', total: 12000 }, { name: 'East Honolulu', total: 1000 }, { name: 'Pearl City', total: 800 }, { name: 'Hilo', total: 900 }, { name: 'Kailua', total: 500 }] },
            "Idaho": { stateTotal: 24100, cities: [{ name: 'Boise', total: 8000 }, { name: 'Meridian', total: 3000 }, { name: 'Nampa', total: 2500 }, { name: 'Idaho Falls', total: 2000 }, { name: 'Caldwell', total: 1500 }] },
            "Illinois": { stateTotal: 301500, cities: [{ name: 'Chicago', total: 150000 }, { name: 'Aurora', total: 12000 }, { name: 'Joliet', total: 8000 }, { name: 'Naperville', total: 7000 }, { name: 'Rockford', total: 9000 }] },
            "Indiana": { stateTotal: 109800, cities: [{ name: 'Indianapolis', total: 35000 }, { name: 'Fort Wayne', total: 10000 }, { name: 'Evansville', total: 6000 }, { name: 'South Bend', total: 5000 }, { name: 'Carmel', total: 3000 }] },
            "Iowa": { stateTotal: 46200, cities: [{ name: 'Des Moines', total: 10000 }, { name: 'Cedar Rapids', total: 6000 }, { name: 'Davenport', total: 5000 }, { name: 'Sioux City', total: 4000 }, { name: 'Iowa City', total: 3000 }] },
            "Kansas": { stateTotal: 36100, cities: [{ name: 'Wichita', total: 10000 }, { name: 'Overland Park', total: 5000 }, { name: 'Kansas City', total: 4000 }, { name: 'Topeka', total: 3500 }, { name: 'Olathe', total: 3000 }] },
            "Kentucky": { stateTotal: 77900, cities: [{ name: 'Louisville', total: 25000 }, { name: 'Lexington', total: 15000 }, { name: 'Bowling Green', total: 4000 }, { name: 'Owensboro', total: 3000 }, { name: 'Covington', total: 2000 }] },
            "Louisiana": { stateTotal: 70200, cities: [{ name: 'New Orleans', total: 20000 }, { name: 'Baton Rouge', total: 15000 }, { name: 'Shreveport', total: 10000 }, { name: 'Lafayette', total: 7000 }, { name: 'Lake Charles', total: 4000 }] },
            "Maine": { stateTotal: 16800, cities: [{ name: 'Portland', total: 4000 }, { name: 'Lewiston', total: 2000 }, { name: 'Bangor', total: 1500 }, { name: 'South Portland', total: 1000 }, { name: 'Auburn', total: 800 }] },
            "Maryland": { stateTotal: 65900, cities: [{ name: 'Baltimore', total: 30000 }, { name: 'Columbia', total: 4000 }, { name: 'Germantown', total: 3500 }, { name: 'Silver Spring', total: 3000 }, { name: 'Waldorf', total: 2500 }] },
            "Massachusetts": { stateTotal: 108300, cities: [{ name: 'Boston', total: 40000 }, { name: 'Worcester', total: 10000 }, { name: 'Springfield', total: 8000 }, { name: 'Cambridge', total: 6000 }, { name: 'Lowell', total: 5000 }] },
            "Michigan": { stateTotal: 191400, cities: [{ name: 'Detroit', total: 50000 }, { name: 'Grand Rapids', total: 15000 }, { name: 'Warren', total: 8000 }, { name: 'Sterling Heights', total: 7000 }, { name: 'Ann Arbor', total: 6000 }] },
            "Minnesota": { stateTotal: 76500, cities: [{ name: 'Minneapolis', total: 25000 }, { name: 'Saint Paul', total: 15000 }, { name: 'Rochester', total: 6000 }, { name: 'Duluth', total: 4000 }, { name: 'Bloomington', total: 3000 }] },
            "Mississippi": { stateTotal: 38900, cities: [{ name: 'Jackson', total: 8000 }, { name: 'Gulfport', total: 4000 }, { name: 'Southaven', total: 2000 }, { name: 'Hattiesburg', total: 1800 }, { name: 'Biloxi', total: 1500 }] },
            "Missouri": { stateTotal: 78100, cities: [{ name: 'Kansas City', total: 20000 }, { name: 'Saint Louis', total: 18000 }, { name: 'Springfield', total: 8000 }, { name: 'Columbia', total: 5000 }, { name: 'Independence', total: 4000 }] },
            "Montana": { stateTotal: 13500, cities: [{ name: 'Billings', total: 3000 }, { name: 'Missoula', total: 2000 }, { name: 'Great Falls', total: 1500 }, { name: 'Bozeman', total: 1800 }, { name: 'Butte', total: 800 }] },
            "Nebraska": { stateTotal: 20100, cities: [{ name: 'Omaha', total: 8000 }, { name: 'Lincoln', total: 5000 }, { name: 'Bellevue', total: 1500 }, { name: 'Grand Island', total: 1200 }, { name: 'Kearney', total: 800 }] },
            "Nevada": { stateTotal: 84600, cities: [{ name: 'Las Vegas', total: 40000 }, { name: 'Henderson', total: 10000 }, { name: 'Reno', total: 12000 }, { name: 'North Las Vegas', total: 8000 }, { name: 'Sparks', total: 3000 }] },
            "New Hampshire": { stateTotal: 14200, cities: [{ name: 'Manchester', total: 4000 }, { name: 'Nashua', total: 3000 }, { name: 'Concord', total: 1500 }, { name: 'Derry', total: 800 }, { name: 'Dover', total: 700 }] },
            "New Jersey": { stateTotal: 219800, cities: [{ name: 'Newark', total: 25000 }, { name: 'Jersey City', total: 22000 }, { name: 'Paterson', total: 12000 }, { name: 'Elizabeth', total: 10000 }, { name: 'Edison', total: 8000 }] },
            "New Mexico": { stateTotal: 32600, cities: [{ name: 'Albuquerque', total: 15000 }, { name: 'Las Cruces', total: 4000 }, { name: 'Rio Rancho', total: 3000 }, { name: 'Santa Fe', total: 2500 }, { name: 'Roswell', total: 1000 }] },
            "New York": { stateTotal: 412700, cities: [{ name: 'New York City', total: 250000 }, { name: 'Buffalo', total: 15000 }, { name: 'Rochester', total: 12000 }, { name: 'Yonkers', total: 10000 }, { name: 'Syracuse', total: 8000 }] },
            "North Carolina": { stateTotal: 174600, cities: [{ name: 'Charlotte', total: 35000 }, { name: 'Raleigh', total: 20000 }, { name: 'Greensboro', total: 12000 }, { name: 'Durham', total: 10000 }, { name: 'Winston-Salem', total: 9000 }] },
            "North Dakota": { stateTotal: 8100, cities: [{ name: 'Fargo', total: 2500 }, { name: 'Bismarck', total: 1500 }, { name: 'Grand Forks', total: 1200 }, { name: 'Minot', total: 1000 }, { name: 'West Fargo', total: 500 }] },
            "Ohio": { stateTotal: 198200, cities: [{ name: 'Columbus', total: 35000 }, { name: 'Cleveland', total: 25000 }, { name: 'Cincinnati', total: 22000 }, { name: 'Toledo', total: 15000 }, { name: 'Akron', total: 10000 }] },
            "Oklahoma": { stateTotal: 51000, cities: [{ name: 'Oklahoma City', total: 18000 }, { name: 'Tulsa', total: 12000 }, { name: 'Norman', total: 4000 }, { name: 'Broken Arrow', total: 3000 }, { name: 'Lawton', total: 2500 }] },
            "Oregon": { stateTotal: 74900, cities: [{ name: 'Portland', total: 30000 }, { name: 'Salem', total: 8000 }, { name: 'Eugene', total: 7000 }, { name: 'Gresham', total: 4000 }, { name: 'Hillsboro', total: 3000 }] },
            "Pennsylvania": { stateTotal: 247800, cities: [{ name: 'Philadelphia', total: 80000 }, { name: 'Pittsburgh', total: 25000 }, { name: 'Allentown', total: 8000 }, { name: 'Erie', total: 6000 }, { name: 'Reading', total: 5000 }] },
            "Rhode Island": { stateTotal: 16500, cities: [{ name: 'Providence', total: 8000 }, { name: 'Cranston', total: 2000 }, { name: 'Warwick', total: 1800 }, { name: 'Pawtucket', total: 1500 }, { name: 'East Providence', total: 1000 }] },
            "South Carolina": { stateTotal: 70400, cities: [{ name: 'Charleston', total: 10000 }, { name: 'Columbia', total: 8000 }, { name: 'North Charleston', total: 5000 }, { name: 'Mount Pleasant', total: 3000 }, { name: 'Rock Hill', total: 2500 }] },
            "South Dakota": { stateTotal: 8900, cities: [{ name: 'Sioux Falls', total: 4000 }, { name: 'Rapid City', total: 1500 }, { name: 'Aberdeen', total: 500 }, { name: 'Brookings', total: 400 }, { name: 'Watertown', total: 300 }] },
            "Tennessee": { stateTotal: 106900, cities: [{ name: 'Nashville', total: 25000 }, { name: 'Memphis', total: 22000 }, { name: 'Knoxville', total: 10000 }, { name: 'Chattanooga', total: 8000 }, { name: 'Clarksville', total: 5000 }] },
            "Texas": { stateTotal: 596100, cities: [{ name: 'Houston', total: 105000 }, { name: 'San Antonio', total: 50000 }, { name: 'Dallas', total: 58000 }, { name: 'Austin', total: 34000 }, { name: 'Fort Worth', total: 32000 }] },
            "Utah": { stateTotal: 41800, cities: [{ name: 'Salt Lake City', total: 10000 }, { name: 'West Valley City', total: 4000 }, { name: 'Provo', total: 3500 }, { name: 'West Jordan', total: 3000 }, { name: 'Orem', total: 2500 }] },
            "Vermont": { stateTotal: 5600, cities: [{ name: 'Burlington', total: 2000 }, { name: 'South Burlington', total: 800 }, { name: 'Rutland', total: 500 }, { name: 'Essex Junction', total: 400 }, { name: 'Barre', total: 300 }] },
            "Virginia": { stateTotal: 112300, cities: [{ name: 'Virginia Beach', total: 18000 }, { name: 'Norfolk', total: 10000 }, { name: 'Chesapeake', total: 9000 }, { name: 'Richmond', total: 12000 }, { name: 'Newport News', total: 7000 }] },
            "Washington": { stateTotal: 163200, cities: [{ name: 'Seattle', total: 35000 }, { name: 'Spokane', total: 12000 }, { name: 'Tacoma', total: 11000 }, { name: 'Vancouver', total: 9000 }, { name: 'Bellevue', total: 6000 }] },
            "West Virginia": { stateTotal: 27900, cities: [{ name: 'Charleston', total: 5000 }, { name: 'Huntington', total: 4500 }, { name: 'Morgantown', total: 3000 }, { name: 'Parkersburg', total: 2500 }, { name: 'Wheeling', total: 2000 }] },
            "Wisconsin": { stateTotal: 77100, cities: [{ name: 'Milwaukee', total: 28000 }, { name: 'Madison', total: 12000 }, { name: 'Green Bay', total: 5000 }, { name: 'Kenosha', total: 4500 }, { name: 'Racine', total: 4000 }] },
            "Wyoming": { stateTotal: 8400, cities: [{ name: 'Cheyenne', total: 2000 }, { name: 'Casper', total: 1800 }, { name: 'Laramie', total: 1000 }, { name: 'Gillette', total: 800 }, { name: 'Rock Springs', total: 600 }] }
        };

        const container = document.getElementById('data-container');
        const fineTunedStates = ["Washington", "California", "Colorado", "Texas", "Florida", "Oregon", "New York"];

        // --- RENDER FUNCTION ---
        function renderState(stateName, data) {
            let currentModel = MODELS[stateName] || MODELS["National"];
            let modelNote = '', summaryHTML = '';
            
            // --- MODEL SELECTION & SUMMARY INJECTION ---
            if (fineTunedStates.includes(stateName)) {
                const currentSummaryData = summaryData[stateName];
                
                const topCitiesPop = currentSummaryData.cities.reduce((sum, city) => sum + city.population, 0);
                const restOfStatePop = currentSummaryData.statePopulation - topCitiesPop;
                const restOfStateIncome = currentSummaryData.stateMedianIncome;

                let summaryRenderList = [...currentSummaryData.cities, {
                    name: 'Rest of State', population: restOfStatePop, income: restOfStateIncome
                }];

                let citySummaryHtml = summaryRenderList.map(item => {
                    const workingPop = Math.round(item.population * currentModel.WORKING_AGE_RATIO);
                    const isRestOfState = item.name.includes('Rest of State');
                    const cardClass = isRestOfState ? 'bg-gray-100' : 'bg-gray-50';
                    const incomeLabel = isRestOfState ? 'State Median Income:' : 'Median Income:';

                    return `
                    <div class="p-4 ${cardClass} rounded-lg">
                        <p class="text-lg font-semibold text-gray-800">${item.name}</p>
                        <p class="text-sm text-gray-600"><i data-feather="users" class="inline-block w-4 h-4 mr-1"></i> Pop: ${item.population.toLocaleString()}</p>
                        <p class="text-sm text-gray-600 font-semibold"><i data-feather="briefcase" class="inline-block w-4 h-4 mr-1"></i> Est. Working Pop: ${workingPop.toLocaleString()}</p>
                        <p class="text-sm text-gray-600"><i data-feather="dollar-sign" class="inline-block w-4 h-4 mr-1"></i> ${incomeLabel} $${item.income.toLocaleString()}</p>
                    </div>`;
                }).join('');
                
                summaryHTML = `
                <section class="mb-8">
                    <div class="p-6 bg-white rounded-xl shadow-md">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                           <i data-feather="pie-chart" class="w-6 h-6 text-blue-600 mr-3"></i>${stateName}: Fine-Tuned Summary
                        </h3>
                        <div class="mb-6">
                            <p class="text-lg font-semibold">Total State Population: <span class="text-blue-600">${currentSummaryData.statePopulation.toLocaleString()}</span></p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            ${citySummaryHtml}
                        </div>
                    </div>
                </section>`;
                modelNote = `<div class="p-2 bg-blue-100 text-blue-800 text-xs text-center rounded-b-lg">Using Fine-Tuned Model for ${stateName}</div>`;
            }

            let citiesTotal = data.cities.reduce((sum, city) => sum + city.total, 0);
            let restOfStateTotal = data.stateTotal - citiesTotal;

            let renderList = [...data.cities];
            if (restOfStateTotal > 0) {
                renderList.push({ name: 'Rest of State (Combined)', total: restOfStateTotal });
            }

            let tableRows = renderList.map(item => {
                const estGradsUnemployed = Math.round(item.total * currentModel.GRAD_RATIO);
                const estArts = Math.round(estGradsUnemployed * currentModel.FIELD_RATIOS.ARTS);
                const estIT = Math.round(estGradsUnemployed * currentModel.FIELD_RATIOS.IT);
                const estBusiness = Math.round(estGradsUnemployed * currentModel.FIELD_RATIOS.BUSINESS);
                const estSocSci = Math.round(estGradsUnemployed * currentModel.FIELD_RATIOS.SOCSCI);
                
                const isRestOfState = item.name.includes('Rest of State');
                const rowClass = isRestOfState ? 'bg-gray-100 font-semibold' : '';

                return `
                    <tr class="${rowClass}">
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">${item.total.toLocaleString()}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-blue-800 bg-blue-50">~ ${estGradsUnemployed.toLocaleString()}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">~ ${estArts.toLocaleString()}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">~ ${estIT.toLocaleString()}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">~ ${estBusiness.toLocaleString()}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">~ ${estSocSci.toLocaleString()}</td>
                    </tr>`;
            }).join('');

            const stateHTML = `
                <div id="state-${stateName.replace(/\s+/g, '')}">
                    ${summaryHTML} 
                    <section class="bg-white rounded-xl shadow-md overflow-hidden">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-3xl font-bold text-gray-800">${stateName}</h2>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-100">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">City / Area</th>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">Est. Total Unemployed</th>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider bg-blue-50">Est. Unemployed Grads</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Est. Arts</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Est. IT</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Est. Business</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Est. Soc. Sci.</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    ${tableRows}
                                </tbody>
                            </table>
                        </div>
                        ${modelNote}
                    </section>
                </div>`;
            container.innerHTML += stateHTML;
        }

        // --- INITIALIZE PAGE ---
        const allStates = Object.keys(cityData).sort();
        const orderedStates = [
            ...fineTunedStates.sort(),
            ...allStates.filter(s => !fineTunedStates.includes(s))
        ];

        for (const stateName of orderedStates) {
            renderState(stateName, cityData[stateName]);
        }
        feather.replace();
    </script>
</body>
</html>